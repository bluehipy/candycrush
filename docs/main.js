!function(t){var e={};function s(i){if(e[i])return e[i].exports;var h=e[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,s),h.l=!0,h.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)s.d(i,h,function(e){return t[e]}.bind(null,h));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i extends PIXI.utils.EventEmitter{suspend(){void 0===this.suspendCount&&(this.suspendCount=0),this.suspendCount++}resume(){this.suspendCount--,this.suspendCount=Math.max(0,this.suspendCount)}isSuspended(){return this.suspendCount&&this.suspendCount>0}emit(){this.isSuspended()||super.emit.apply(this,arguments)}}const h={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};class r{constructor(t){this.elastic=!1,this.elasticSteps=0,Object.assign(this,t),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),this.ticker=new PIXI.ticker.Ticker,this.ticker.stop(),this.init()}then(t){return this.promise.then(e=>t(e))}catch(t){return this.promise.catch(e=>t(e))}init(){this.currentFrame=0,this.startState||(this.startState=this.getCurrentState()),this.ticker.add(()=>this.onTick()),!1!==this.autoStart&&this.start()}getCurrentState(){let t={};for(let e in this.endState)t[e]=this.actor[e];return t}getElasticState(){if(1===(this.elasticSteps%2?-1:1))return this.endState;let t=Object.assign({},this.endState);for(let e in t)t[e]=this.startState[e]+.9*(t[e]-this.startState[e]);return t}start(){this.onStart&&this.onStart(),this.ticker.start()}pause(){this.ticker.stop()}stop(){this.onStop&&this.onStop(),this.ticker.stop(),this.resolve(this.actor)}onTick(){this.currentFrame++,this.currentFrame>this.duration?(this.pause(),this.elastic?this.elasticSteps<2?(this.elasticSteps++,new r({elastic:!1,actor:this.actor,endState:this.getElasticState(),duration:this.duration/(2*this.elasticSteps),ease:this.elasticSteps%2?"easeOutQuad":"easeInQuad"}).then(()=>this.onTick())):(this.currentFrame=this.duration,this.apply(),this.stop()):this.stop()):this.apply()}apply(){Object.assign(this.actor,this.transform(this.actor,this.currentFrame,this.duration,this.startState,this.endState))}transform(){let t,e={};for(t in this.startState){this.ease||(this.ease="easeOutQuad");let s=h[this.ease]||h.linear;e[t]=this.startState[t]+s(this.currentFrame/this.duration)*(this.endState[t]-this.startState[t])}if(this.fn){let t=this.fn.apply(this,arguments);Object.assign(e,t)}return e}destroy(){this.isDestroyed||(this.isDestroyed=1,this.pause(),this.reject(),delete this.reject,delete this.resolve,this.promise=null,delete this.actor,delete this.startState,delete his.endState,delete this.fn)}}class n extends PIXI.Container{constructor(t){super(),Object.assign(this,t),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),this.alpha=0,this.redraw(this.w,this.h),this.show()}show(){new r({actor:this,startState:{y:-this.height,alpha:0},endState:{y:0,alpha:1},duration:20})}then(t){return this.promise.then(e=>t(e))}redraw(t,e){this.children.length&&this.removeChildren(0,this.children.length).forEach(t=>t.destroy());let s=new PIXI.Container,i=new PIXI.Sprite(this.texture);s.addChild(i);for(let t=0;t<this.levels.length;t++){let e=this.drawLevel(t+1,t===this.currentLevel?16711680:t>this.currentLevel?13421772:65280);t<=this.currentLevel&&(e.interactive=!0,e.on("tap",this.selectLevel.bind(this,t)),e.on("mousedown",this.selectLevel.bind(this,t))),s.addChild(e),e.x=this.levels[t][0],e.y=this.levels[t][1]}t<e||e>600?(s.height=e,s.scale.x=s.scale.y,s.x=(t-s.width)/2):(s.height=t,s.scale.x=s.scale.y,s.rotation=Math.PI/2,s.y=(e-s.width)/2,s.x=t),this.addChild(s)}drawLevel(t,e){let s=new PIXI.Graphics;return s.lineStyle(10,e,.8),s.beginFill(e,.1),s.drawCircle(40,40,40),s.endFill(),s}selectLevel(t){this.resolve(t)}destroy(){new r({actor:this,endState:{y:-this.height,alpha:0},startState:{y:0,alpha:1},duration:20}).then(()=>super.destroy())}}class o extends PIXI.Container{constructor(t,e,s){super(),this.msg=t,this.alpha=0,this.redraw(e,s),this.show()}show(){new r({actor:this,startState:{y:-this.height,alpha:0},endState:{y:0,alpha:1},duration:20})}redraw(t,e){let s=this.msg;this.bg&&this.bg.destroy();let i=new PIXI.Graphics;this.bg=i,i.beginFill(0,.8),i.drawRect(0,0,t,e),i.endFill(),s.x=(i.width-s.width)/2,s.y=(i.height-s.height)/2,this.addChild(i),this.addChild(s)}destroy(){new r({actor:this,endState:{y:-this.height,alpha:0},startState:{y:0,alpha:1},duration:20}).then(()=>super.destroy())}}class a extends i{constructor(t){super(),Object.assign(this,t),this.width=window.innerWidth,this.height=window.innerHeight,Renderer.tpl=this.tpl.bind(this),Renderer.showMessage=this.showMessage.bind(this),this.init()}init(){this.levelIndex=0,this.showLoading(),PIXI.loader.add("map","src/assets/map.jpg").add("candysheet","src/assets/candies.json").add("girlsheet","src/assets/girl.json").load(this.onAssetsLoaded.bind(this))}showLoading(){this.loadingTxt=new PIXI.Text("Loading ...",{fill:"orange",align:"center"}),Renderer.add(this.loadingTxt),this.loadingTxt.x=(this.width-this.loadingTxt.width)/2,this.loadingTxt.y=(this.height-this.loadingTxt.height)/2}hideLoading(){this.loadingTxt.destroy(),delete this.loadingTxt}onAssetsLoaded(t,e){let s,i=[],h=[];for(this.hideLoading(),this.mapTexture=e.map.texture,s=0;s<6;s++){var r="candy "+s,n=PIXI.Texture.fromFrame(r);i.push(n)}for(s=0;s<3;s++){r="girl "+s,n=PIXI.Texture.fromFrame(r);h.push(n)}this.textures=i,this.fatures=h,this.showMessage("Let's crash some candies!",t=>{t.destroy(),this.run()},0)}run(){this.showMap()}initLevel(){let t=this.levels[this.levelIndex];this.currentLevel=new t({textures:this.textures,w:this.width,h:this.height}),this.currentLevel.then(t=>{this.currentLevel.destroy(),this.showMessage("Well done!",t=>{t.destroy(),this.levelIndex++,this.run()},2)}).catch(t=>{this.currentLevel.destroy(),this.showMessage("Sorry, you have failed!",t=>{t.destroy(),this.run()},1)}),this.currentLevel.start()}showMessage(t,e=null,s=0){"string"==typeof t&&(t=this.tpl(t));let i=new PIXI.Sprite(this.fatures[s]);i.width>this.width&&(i.width=this.width,i.scale.y=i.scale.x);let h=new PIXI.Container;h.addChild(i),h.addChild(t),i.x=(t.width-i.width)/2,t.y=i.height+t.height/2;let r=new o(h,this.width,this.height);this.on("resize",(t,e)=>r.redraw(t,e)),e&&(r.interactive=!0,r.on("mousedown",()=>e(r)),r.on("tap",()=>e(r))),Renderer.add(r)}tpl(t){let e=[],s=[];let i=t.replace(/(#\d+?)/g,(t,s,i,h)=>(e.push(t.substr(1)),"##$$$"));e=e.map(t=>new PIXI.Sprite(this.textures[t])),i=(i=i.split("##$$$")).map(t=>t.length&&new PIXI.Text(t,{font:"7em Gamja Flower",fill:"orange"}));let h=0;i.forEach((t,i)=>{let r;t&&s.push(t),h=Math.max(h,t.height),(r=e[i])&&(s.push(r),r.height=h,r.scale.x=r.scale.y,r.y=r.height/5)});let r=new PIXI.Container,n=0;return s.map((t,e)=>(t&&(t.x=n,n+=t.width),t&&r.addChild(t),t)),r}showMap(){let t=new n({texture:this.mapTexture,w:this.width,h:this.height,currentLevel:this.levelIndex,levels:[[475,1240],[725,1115],[295,710]]});Renderer.add(t),this.evolutionMap=t,t.then(t=>{this.levelIndex=t,this.evolutionMap.destroy(),delete this.evolutionMap,this.initLevel()})}resize(t,e){this.width=t,this.height=e,this.evolutionMap&&this.evolutionMap.redraw(t,e),this.currentLevel&&this.currentLevel.redraw(t,e),this.emit("resize",t,e)}}class l extends PIXI.Container{constructor(t){super(),this.goal=null,this.score=null,this.level=null,Object.assign(this,t),this.init()}init(){this.addListeners(),this.redraw(this.w,this.h)}addListeners(){this.level.on("scorechange",this.onChange,this),this.level.on("moveschange",this.onChange,this),this.level.on("goalchange",this.onChange,this)}removeListeners(){this.level.off("scorechange",this.onChange,this),this.level.off("moveschange",this.onChange,this),this.level.off("goalchange",this.onChange,this)}onChange(){this.score&&this.score.destroy(),this.moves&&this.moves.destroy(),this.goal&&this.goal.destroy(),this.score=new PIXI.Text("score \n"+this.level.getScore(),{font:"7em Gamja Flower",fill:"orange",align:"center"}),this.score.x=this.w-this.score.width-5,this.moves=new PIXI.Text("moves \n"+this.level.getRemainingMoves(),{font:"7em Gamja Flower",fill:"orange",align:"center"}),this.moves.x=15,this.goal=this.level.renderGoal(),this.goal.x=(this.w-this.goal.width)/2,this.addChild(this.moves),this.addChild(this.score),this.addChild(this.goal)}redraw(t,e){this.w=t,this.h=e,this.onChange()}destroy(){this.removeListeners(),PIXI.Container.prototype.destroy.call(this)}}class d extends i{constructor(t){super(),Object.assign(this,t),this.init()}init(){this.data=[];for(let t=0;t<this.rowsNo;t++)this.data.push(new Array(this.colsNo))}set(t,e,s){if(t<0||t>=this.rowNo||e<0||e>=this.colNo)throw new Exception("Out of bounds");this.data[t][e]=s}get(t,e){return t<0||t>=this.rowsNo||e<0||e>=this.colsNo?null:this.data[t][e]}getAbove(t){let e,s=t[0][0],i=t[0][1],h=[];for(;e=this.up(s--,i);)h.push(e);return h}remove(t,e){let s=this.get(t,e);return this.set(t,e,null),this.emit("remove",t,e,s),s}up(t,e){let s;return this.get(t-1,e)&&(s=[t-1,e]),s}down(t,e){let s;return this.get(t+1,e)&&(s=[t+1,e]),s}left(t,e){let s;return this.get(t,e-1)&&(s=[t,e-1]),s}right(t,e){let s;return this.get(t,e+1)&&(s=[t,e+1]),s}swap(t,e,s,i){let h=this.get(t,e),r=this.get(s,i);this.set(t,e,r),this.set(s,i,h),this.emit("swap",t,e,h,s,i,r)}moveTo(t,e,s,i){this.set(s,i,this.get(t,e)),this.suspend(),this.remove(t,e),this.resume(),this.emit("move",t,e,s,i,this.get(s,i))}moveBy(t,e,s,i){this.moveTo(t,e,t+s,e+i)}each(t){let e=!0;this.data.every((s,i)=>(s.every((s,h)=>e=e&&!1!==t(i,h,s)),e))}find(t){let e;return this.each((s,i,h)=>h!==t||(e=[s,i],!1)),e}destroy(){this.removeAllListeners(),this.suspend(),this.data.map((t,e)=>t.length=0),this.data.length=0,delete this.data,this.resume()}}class c extends PIXI.Container{constructor(t,e,s){super(),this.init(t,e,s)}init(t,e,s){let i=new PIXI.Sprite(t);this.addChild(i),this.interactive=!0,this.on("touchstart",this.onCellDragStart.bind(this)),this.on("mousedown",this.onCellDragStart.bind(this)),this.redraw(e,s)}onCellDragStart(t){this.startX=t.data.global.x,this.startY=t.data.global.y,this.on("touchmove",this.onCellDrag.bind(this)),this.on("mousemove",this.onCellDrag.bind(this)),this.once("touchend",()=>{this.off("touchmove"),this.off("mousemove")}),this.once("mouseup",()=>{this.off("touchmove"),this.off("mousemove")})}onCellDrag(t){let e=t.data.global.x-this.startX,s=t.data.global.y-this.startY,i=Math.abs(e),h=Math.abs(s);(i>this.width/4||h>this.height/4)&&(this.off("touchmove"),this.off("mousemove"),i>h?this.emit("drag",e>0?"right":"left"):this.emit("drag",s<0?"up":"down"))}redraw(t,e){let s=this.children[0];s.width=t,s.scale.y=s.scale.x,s.x=-s.width/2,s.y=-s.height/2}}class u{constructor(t){this.view=t,this.model=t.model,this.init()}init(){this.addListeners()}registerCell(t){t.on("drag",this.onDrag.bind(this,t))}unregisterCell(t){t.off("drag")}addListeners(){this.model.on("swap",this.onSwap.bind(this)),this.model.on("remove",this.onRemove.bind(this))}removeListeners(){this.model.off("swap"),this.model.off("remove")}onDrag(t,e){if(this.view.isLocked())return;let s,i=this.model.find(t);i&&(s=this.model[e](...i))&&this.model.swap(...i,...s)}onSwap(t,e,s,i,h,r){let n=this.noCheck;this.view.swap(s,r).then(()=>!n&&this.check([[t,e],[i,h]]))}onRemove(t,e,s){this.unregisterCell(s),this.view.remove(s)}check(t,e=!0){let s=[],i=[];if(this.view.emit("begincheck"),t.forEach(t=>{let e=this.checkRow(...t),h=this.checkColumn(...t);e.length>=3&&s.push(e),h.length>=3&&i.push(h)}),s.map(t=>t.forEach(t=>i.push([t]))),!i.length&&e)return this.noCheck=!0,this.model.swap(...t[0],...t[1]),delete this.noCheck,void this.view.emit("endcheck");i.length&&e&&this.view.emit("validmove"),i.length||this.view.emit("endcheck"),Promise.all(i.map(t=>this.collect(t))).then(t=>Promise.all(t.map(t=>this.fill(t)))).then(t=>{t.length&&this.check(t.reduce((t,e)=>(e&&(t=[].concat(t,e)),t),[]),!1)})}fill(t){let e=[];if(this.model.get(...t[0]))return new Promise(t=>t(!1));let s=this.model.getAbove(t),i=t.length;return s.map((t,s)=>{let h=this.model.get(...t),r=t.slice();r[0]+=i,this.model.set(...t,null),this.model.set(...r,h),e.push(this.view.move(h,this.view.getX(r[1]),this.view.getY(r[0])).then(()=>r))}),t.map((h,r)=>{let n=t[i-r-1];n[0]-=s.length;let o=this.view.createCell(n[0]-i,n[1],Math.floor(Math.random()*this.view.textures.length));this.model.set(...n,o),e.push(this.view.move(o,this.view.getX(n[1]),this.view.getY(n[0])).then(()=>n))}),Promise.all(e)}checkRow(t,e){let s,i=this.model.get(t,e).code,h=[[t,e]],r=t,n=e;for(;(s=this.model.right(r,n++))&&this.model.get(...s).code===i;)h.push(s);for(r=t,n=e;(s=this.model.left(r,n--))&&this.model.get(...s).code===i;)h.push(s);return h.sort((t,e)=>1e3*(t[0]-e[0])+e[1]-t[1])}checkColumn(t,e){let s,i=this.model.get(t,e).code,h=[[t,e]],r=t,n=e;for(;(s=this.model.up(r--,n))&&this.model.get(...s).code===i;)h.push(s);for(r=t,n=e;(s=this.model.down(r++,n))&&this.model.get(...s).code===i;)h.push(s);return h.sort((t,e)=>1e3*(t[0]-e[0])+e[1]-t[1])}collect(t){return this.view.emit("collect",t),Promise.all(t.map(t=>{let e=this.model.get(...t);return e?(this.model.remove(...t),this.view.remove(e).then(()=>t)):t}))}destroy(){this.removeListeners(),this.model.each((t,e,s)=>s&&this.unregisterCell(s))}}class g extends r{constructor(t){super(t)}onStart(){this.actor.lock()}onStop(){this.actor.unlock()}}class m extends i{constructor(t){super(),Object.assign(this,t),this.init()}init(){this.lockCount=0,this.animations=[],this.model=new d({rowsNo:this.map.length,colsNo:this.map[0].length}),this.controller=new u(this),this.drawBg(),this.map.forEach((t,e)=>t.forEach((t,s)=>this.model.set(e,s,this.createCell(e,s,t))))}drawBg(){let t=this.cellWidth,e=new PIXI.Container;this.map.forEach((s,i)=>s.forEach((s,h)=>{if(null!==s){let s=new PIXI.Graphics;s.lineStyle(1,0),s.beginFill(8244699,1),s.drawRoundedRect(-t/2,-t/2,t,t,1),s.endFill(),s.x=this.getX(h),s.y=this.getY(i),e.addChild(s)}})),this.bg=e,Renderer.add(e)}getX(t){return this.x+this.cellWidth*(.5+t)}getY(t){return this.y+this.cellHeight*(.5+t)}createCell(t,e,s){if(null===s)return null;let i=new c(this.textures[s],this.cellWidth,this.cellHeight);return i.code=s,i.x=this.getX(e),i.y=this.getY(t),i.lock=this.lock.bind(this),i.unlock=this.unlock.bind(this),this.controller.registerCell(i),Renderer.add(i),i}swap(t,e){let s=Renderer.maxZIndex();return Renderer.setZIndex(t,s),Promise.all([new g({actor:t,endState:{y:e.y,x:e.x},duration:15,fn:(t,e,s,i,h)=>{let r=s/2,n=1+e*(s-e)/(r*r)/2;return{scale:{x:n,y:n}}}}),new g({actor:e,endState:{y:t.y,x:t.x},duration:15})])}remove(t){return new g({actor:t,endState:{alpha:0,width:t.width/4,height:t.height/4},duration:25}).then(t=>(t.destroy(),t))}move(t,e,s){return new g({elastic:!0,ease:"easeOutQuad",actor:t,endState:{x:e,y:s},duration:this.dist(t.x,t.y,e,s)})}dist(t,e,s,i){return Math.round(3*Math.sqrt((t-s)*(t-s)+(e-i)*(e-i))/this.cellWidth)}lock(){this.lockCount++}unlock(){this.lockCount--,this.isLocked()||this.onUnlock&&this.onUnlock()}isLocked(){return this.lockCount>0}redraw(t,e){this.cellWidth=t,this.cellHeight=e,this.isLocked()?this.onUnlock=this.redraw.bind(this,t,e):(this.bg.destroy(),this.drawBg(),Renderer.setZIndex(this.bg,0),this.model.each((s,i,h)=>(h&&(h.x=this.getX(i),h.y=this.getY(s),h.redraw(t,e)),!0)))}getAnimation(t){let e=new g(t);return this.animations.push(e),e}destroy(){this.removeAllListeners(),this.suspend(),this.animations.map(t=>t.destroy()),this.animations.length=0,this.controller.destroy(),this.model.removeAllListeners(),this.model.each((t,e,s)=>s&&s.destroy()),this.model.destroy(),this.bg.destroy(),delete this.model,delete this.controller,this.resume()}}class p extends i{constructor(t){super(),Object.assign(this,t),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e}),this.setScore(0),this.setMoves(0),this.beforeInit(),this.init()}then(t){return this.promise.then(e=>t(e))}catch(t){return this.promise.catch(e=>t(e))}init(){let t=this.w,e=this.h;this.status=new l({level:this,w:t,h:e}),Renderer.add(this.status),e-=this.status.height;let s=Math.min(t,e),i=Math.floor(s/Math.max(this.map.length,this.map[0].length)),h=this.map.length*i,r=this.map[0].length*i;this.table=new m({x:Math.floor((t-r)/2),y:this.status.height+Math.floor((e-h)/2),cellWidth:i,cellHeight:i,textures:this.textures,map:this.map}),this.addListeners()}addListeners(){this.table.on("begincheck",this.onBeginCheck.bind(this)),this.table.on("endcheck",this.onEndCheck.bind(this)),this.table.on("validmove",this.onValidMove.bind(this)),this.table.on("collect",this.onCollect.bind(this))}removeListeners(){this.table.off("begincheck"),this.table.off("endcheck"),this.table.off("validmove"),this.table.off("collect")}beforeInit(){}setScore(t){this.score=t,this.emit("scorechange",t)}getScore(){return this.score}setMoves(t){this.moves=t,this.emit("movechange",this.allowedMoves-t)}getMoves(){return this.moves}getRemainingMoves(){return this.allowedMoves-this.getMoves()}updateGoal(){this.emit("goalchange")}renderGoal(){}onBeginCheck(){}onEndCheck(){this.checkCriterias()}onValidMove(){}onCollect(){}successCriteria(){}failureCriteria(){}checkCriterias(){this.started&&(this.successCriteria()?(this.end(),this.resolve(!0)):this.failureCriteria()&&(this.end(),this.reject()))}start(){this.started=!0}end(){this.started=!1}redraw(t,e){if(this.w=t,this.h=e,this.status){this.status.redraw(t,e),e-=this.status.height;let s=Math.min(t,e),i=Math.floor(s/Math.max(this.map.length,this.map[0].length)),h=this.map.length*i,r=this.map[0].length*i;this.table&&(this.table.x=Math.floor((t-r)/2),this.table.y=this.status.height+Math.floor((e-h)/2),this.table.redraw(i,i))}}destroy(){this.removeListeners(),this.status.destroy(),delete this.status,this.table.destroy(),delete this.table}}class w extends p{beforeInit(){this.map=[];for(let t=0;t<8;t++){this.map[t]=[];for(let e=0;e<8;e++)this.map[t].push(Math.floor(Math.random()*this.textures.length))}this.redCandies=0,this.blueCandies=0,this.allowedMoves=50}init(){p.prototype.init.call(this),Renderer.showMessage("Collect 10 x #0 and 10 x #1",t=>t.destroy())}renderGoal(){let t=`${Math.max(0,10-this.redCandies)} #0 ${Math.max(0,10-this.blueCandies)} #1`;return Renderer.tpl(t)}onValidMove(){this.setMoves(this.getMoves()+1)}onCollect(t){this.setScore(this.getScore()+t.length),t.forEach(t=>{let e=this.table.model.get(...t);e&&(0===e.code?this.redCandies++:1===e.code&&this.blueCandies++)}),this.updateGoal()}successCriteria(){return this.redCandies>=10&&this.blueCandies>=10}failureCriteria(){return this.getMoves()>this.allowedMoves}}class v extends p{beforeInit(){this.map=[[0,1,2,3,4,5,0,1],[0,0,1,1,0,0,2,2],[1,1,2,2,1,1,3,3],[1,1,2,null,null,1,3,3],[1,1,2,null,null,1,3,3],[1,1,2,2,1,1,3,3],[0,0,1,1,0,0,2,2],[0,1,2,3,4,5,0,1]],this.redCandies=0,this.blueCandies=0,this.allowedMoves=100}init(){p.prototype.init.call(this),Renderer.showMessage("Collect 10 x #0 and 10 x #1",t=>t.destroy())}renderGoal(){let t=`${Math.max(0,10-this.redCandies)} #0 ${Math.max(0,10-this.blueCandies)} #1`;return Renderer.tpl(t)}onValidMove(){this.setMoves(this.getMoves()+1)}onCollect(t){this.setScore(this.getScore()+t.length),t.forEach(t=>{let e=this.table.model.get(...t);e&&(0===e.code?this.redCandies++:e.code,this.blueCandies++)}),this.updateGoal()}successCriteria(){return this.redCandies>=10&&this.blueCandies>=10}failureCriteria(){return this.getMoves()>this.allowedMoves}}class f extends p{beforeInit(){this.map=[[null,1,null,null,null,null,0,null],[0,0,1,null,null,1,2,2],[1,1,2,2,1,1,3,3],[1,1,2,3,1,1,3,3],[1,1,2,0,0,1,3,3],[null,1,2,2,1,1,3,null],[null,null,1,1,0,0,null,null],[null,null,null,3,4,null,null,null]],this.redCandies=0,this.blueCandies=0,this.allowedMoves=100}init(){p.prototype.init.call(this),Renderer.showMessage("Collect 10 x #0 and 10 x #1",t=>t.destroy())}renderGoal(){let t=`${Math.max(0,10-this.redCandies)} #0 ${Math.max(0,10-this.blueCandies)} #1`;return Renderer.tpl(t)}onValidMove(){this.setMoves(this.getMoves()+1)}onCollect(t){this.setScore(this.getScore()+t.length),t.forEach(t=>{let e=this.table.model.get(...t);e&&(0===e.code?this.redCandies++:e.code,this.blueCandies++)}),this.updateGoal()}successCriteria(){return this.redCandies>=10&&this.blueCandies>=10}failureCriteria(){return this.getMoves()>this.allowedMoves}}try{Math.sgn||(Math.sgn=(t=>0===t?0:t/Math.abs(t)));const t=new PIXI.Application({autoResize:!0,width:window.innerWidth,height:window.innerHeight,antialias:!0,transparent:!1,resolution:1,backgroundColor:0});window.Renderer={add:e=>t.stage.addChild(e),setZIndex:(e,s)=>t.stage.setChildIndex(e,s),maxZIndex:()=>t.stage.children.length-1},WebFont.load({google:{families:["Gamja Flower"]},active:function(){document.body.appendChild(t.view);let e=new a({app:t,levels:[w,v,f]});window.addEventListener("resize",()=>{let s,i;window?(s=window.innerWidth,i=window.innerHeight):(s=t.view.parentNode.offsetWidth,i=t.view.parentNode.offsetHeight),t.renderer.resize(s,i),e.resize(s,i)})}})}catch(t){alert(t.message||t)}}]);